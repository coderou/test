1.å°†æ¥å¼€å‘ä¸­çš„æƒ…å†µ,è¦ä¹ˆå†™å¥½äº†åå°,è¦ä¹ˆæ²¡å†™å¥½,ç»å¤§éƒ¨åˆ†æƒ…å†µæ˜¯åå°å†™å¥½äº†,ä½†æ˜¯å¯èƒ½ä¼šé‡åˆ°çªå‘æƒ…å†µ,è¿™æ—¶å€™éœ€è¦ç”¨mockæ¨¡æ‹Ÿæ•°æ®
2.meta:ä¸€æ—¦åœ°å€åŒ¹é…ä¸Šäº†,å°±ä¼šä¼ åˆ°$routeä¸­,å¯ä»¥é€šè¿‡$routeè·å–metaä¼ é€’çš„æ•°æ®
3.è¯·æ±‚æ‹¦æˆªå™¨:è®¾ç½®å…¬å…±çš„è¯·æ±‚æ•°æ®,æ¯”å¦‚token(ç”¨æˆ·è¯†åˆ«ä»¤ç‰Œ)
4.é¢è¯•:é¢è¯•å¤šåŠä¼šé—®ä½ æœ‰æ²¡æœ‰è®¾ç½®è¿‡è¯·æ±‚æ‹¦æˆªå™¨,åšäº†ä»€ä¹ˆæ‹¦æˆªå™¨,æœ‰ä»€ä¹ˆç”¨
5.é¢è¯•:è¦æ¸…æ¥šè‡ªå·±å†™äº†ä»€ä¹ˆ,èƒ½è¯´å‡ºæ¥,ä¸ä¸€å®šè¦å†™å‡ºæ¥ä»£ç ,çœŸå®å¼€å‘ä»£ç å¯ä»¥ç™¾åº¦,å¯ä»¥å‚è€ƒ,å¯ä»¥é—®
6.ä¸‰çº§å¯¼èˆªçš„è¿˜ä¸æ˜¯å¾ˆå¤æ‚,å…¬å¸ä¸­æ‹¿åˆ°çš„æ•°æ®è¦æ›´åŠ å¤æ‚
7.çœŸæ­£å¤æ‚çš„æ˜¯å¤šä¸ªç»„ä»¶çš„æ•°æ®äº¤äº’,æ¯”å¦‚è´­ç‰©è½¦
8.swiper6æ”¯æŒçš„æ˜¯vue3,
9.ä½¿ç”¨mockçš„æ—¶å€™å¦‚æœä¸çŸ¥é“æ•°æ®ç»“æ„ä»€ä¹ˆæ ·å­,å¯ä»¥é—®åç«¯,ä½†æ˜¯æœ€å¥½è‡ªå·±èƒ½å†™,èµ·åå­—è¦æœ‰æ„ä¹‰
10.swiperæƒ³è¦çœŸæ­£ç”Ÿæ•ˆ,å¿…é¡»å…ˆæœ‰DOMå…ƒç´ ,è€Œè¿™æ—¶å€™bannersä¸€å¼€å§‹æ˜¯ç©ºæ•°ç»„,å…ˆæ¸²æŸ“çš„carousel,å†æ‹¿çš„æ•°æ®,å¯¼è‡´å›¾ç‰‡ä¸æ˜¾ç¤ºä¸”swiperå•é¡µ
ğŸŸ11.swiperé…åˆmockæ‹¿å›¾ç‰‡
  tip:new Swiperå¿…é¡»å¿…é¡»å¿…é¡»åœ¨DOMç”Ÿæˆä¹‹åå†æ‰§è¡Œ
  tip:this.$nextTick():vueå®ä¾‹çš„æ–¹æ³•,ç­‰å¾…DOMå…ƒç´ æŒ‚è½½å®Œæ¯•ä¹‹å,æ‰§è¡Œå†…éƒ¨ä»£ç ,ä¸”æ‰§è¡Œä¸€æ¬¡
  tip:vueæ›´æ–°æ•°æ®æ›´æ–°DOMæ˜¯å¼‚æ­¥çš„,åœ¨MVVMä¸­,æ˜¯åŒæ­¥çš„,åœ¨æºç ä¸­,ä¼šå°†cbæ”¾å…¥å›è°ƒé˜Ÿåˆ—æ‰§è¡Œ
  tip:new Swiper(å‚æ•°1,{}),å‚æ•°1å¯ä»¥æ˜¯é€‰æ‹©å™¨ä¹Ÿå¯ä»¥æ˜¯çœŸå®domå…ƒç´ 
    classé€‰æ‹©å™¨:é¡µé¢æ‰€æœ‰å…·æœ‰ç›¸åŒclassç±»çš„carousel,éƒ½ä¼šå˜æˆè½®æ’­å›¾
    çœŸå®domå…ƒç´ :æ ¹æ®thisä¸åŒ,è½®æ’­å›¾ä¸åŒ,åªä¼šå¯¹è¿ç”¨äº†carouselçš„ç»„ä»¶èµ·ä½œç”¨
  tip:ğŸ˜‚ä¼ é€’çœŸå®domå…ƒç´ çš„æ–¹æ³•:
    domå…ƒç´ :æ ‡ç­¾å±æ€§ ref="name"
    å®ä¾‹ä½¿ç”¨:this.$refs.name  :  å°±æ˜¯è¯¥domå…ƒç´ 
  tip:Carousel:æ—‹è½¬æœ¨é©¬,è½®æ’­å›¾

  #store/modules/home.js
  {
    import {reqGetBanners}from '@/api/index.js'
    const state={
      banners:[],
    };
    const mutations={
      GET_BANNERS(state, banners) {
        state.banners = banners;
      },
    };
    const actions={
      getBanners({ commit }) {
        reqGetBanners()
          .then((banners) => {
            commit('GET_BANNERS', banners);
          })
          .catch((message) => {
            console.log(message);
          });
      },
      }
  }
  #views/Home/ListContainer.vue
  {
    <template>
      <Carousel :carouselList="banners" />
    </template>
    <script>
      import {mapState,mapActions} from 'vuex';
      export default{
        computed:{
          ...mapState({
            banners:(state)=>state.home.banners,
          })
        },
        methods:{
          ...map(['getBanners'])
        },
        mounted(){
          this.getBanners()
        },
      }
    </script> 
  }
  #/components/Carousel/index.vue
  {
    <template>
      <div
        class="swiper-container"
        ref="swiper"
        @mouseenter="swiper.autoplay.stop()"
        @mouseleave="swiper.autoplay.start()"
      >
        <div class="swiper-wrapper">
          <div v-for="image in carouselList" :key="image.id" class="swiper-slide">
            <img :src="image.imgUrl" :alt="image.title" />
          </div>
        </div>
      </div>
    </template>
    <script>
      export default{
        props:['carouselList],
        watch:{
          carouselList(){
            this.$nextTick(){
              this.swiper=new Swiper(this.$refs.swiper,{
                .....
              });
              console.log(this.swiper)
            };
          },
        },
        mounted(){},
      }
    </script>
  }
12.watchç›‘è§†carouselæ•°æ®->æ‹¿åˆ°æ•°æ®->watcheræ–¹æ³•è§¦å‘->DOMèŠ‚ç‚¹æ›´æ–°å®Œæˆ->this.$nextTick()è§¦å‘->new Swiper
ğŸŸ13.é¢è¯•é¢˜:å¼€å‘é‡åˆ°é—®é¢˜/å¼€å‘ç»éªŒ:swiperå®ä¾‹å‚æ•°1ç”¨cssé€‰æ‹©å™¨,å°±æ˜¯3ä¸ª,æ¢$refä¹‹å,å°±æ˜¯ä¸€ä¸ª
  æ‰€ä»¥ä¹‹å‰çš„3ä¸ªå…¶å®å°±æ˜¯é¡µé¢ä¸€å…±æœ‰3ä¸ªè½®æ’­å›¾
  é¢è¯•å¯ä»¥è¯´!!
  é‡åˆ°äº†åŒä¸€ä¸ªé¡µé¢ä½¿ç”¨å¤šä¸ªswiperçš„æ—¶å€™,å‡ºç°swiperå®ä¾‹æ˜¯ä¸€ä¸ªæ•°ç»„,è¿™é‡Œæ¶‰åŠåˆ°çŸ¥è¯†ç‚¹,å¦‚æœnew Swiper(å‚æ•°1,{é…ç½®å¯¹è±¡})çš„å‚æ•°1æ˜¯cssé€‰æ‹©å™¨,å°±ä¼šé€‰æ‹©é¡µé¢ä¸Šæ‰€æœ‰ç¬¦åˆè¦æ±‚çš„å…ƒç´ ,å¯¼è‡´å‡ºç°3ä¸ª
  ,è€Œä½¿ç”¨refæŠ€æœ¯ä¹‹å,å‚æ•°1ç›´æ¥ä¼ é€’çœŸå®DOM,ä¼šå› ä¸ºthis.$refs.xxxçš„thisä¸åŒ,è€Œä¸ä¼šå†äº’ç›¸å¹²æ‰°,åŒæ—¶mouseleaveå’Œmouseenteräº‹ä»¶ä¹Ÿä¸åœ¨éœ€è¦[0]è¿›è¡Œé€‰æ‹©
  ,å¦ä¸€ä¸ªé—®é¢˜æ˜¯å½“ä½¿ç”¨vuexä¼ é€’ç»™ä½¿ç”¨Carouselå¤šä¸ªå®ä¾‹çš„æ—¶å€™,å› ä¸ºç»è¿‡äº†ä¸­é—´å±‚ä¼ é€’,å‡ºç°äº†å½“<Carousel v-for="..."/>ç»„ä»¶è¢«æ¸²æŸ“çš„æ—¶å€™,éœ€è¦v-forçš„é‡Œé¢æœ‰æ•°æ®
  ,è€Œv-foré‡Œé¢æœ‰æ•°æ®äº†,Carouselé‡Œé¢ä¹Ÿæœ‰æ•°æ®äº†,å³:watchä¸€å¼€å§‹ç›‘è§†åˆ°çš„carouselListå·²ç»æ˜¯æœ‰æ•°æ®çš„,ä¸ä¼šå†å‘ç”Ÿå˜åŒ–,ä¸ä¼šè§¦å‘
  ,è§£å†³:ä½¿ç”¨watchçš„å¯¹è±¡å†™æ³•:
    {
      watch:{
        carouselList: {
          handler(newVal) {
            if (!newVal.length) return; // ä¸ºäº†bannersç¬¬ä¸€æ¬¡ä¸è¦newSwiper
            this.$nextTick(() => {
              this.swiper = new Swiper(this.$refs.swiper, {
                .....
              });
              console.log(this.swiper);
            });
          },
          immediate: true,
        },
      },
    }
14.ç”ŸæˆæŒ‡å®šå¤§å°çš„å›¾ç‰‡çš„å·¥å…·
15.1floorsæ²¡æœ‰æ•°æ®,ä¸ä¼šç”ŸæˆFloor,æœ‰æ•°æ®,é‚£ä¹ˆcarouseListä¹Ÿä¼šæœ‰æ•°æ®,æ‰€æœ‰watchä¸ä¼šç›‘è§†åˆ°æ•°æ®å˜åŒ–
16.å®ç°åŒä¸€é¡µé¢å¤šä¸ªè½®æ’­å›¾
  tip:
  #mock/floors.json
  {
    data
  }
  #mock/index.js
  {
    import floors from './floors.json';
    Mock.mock('/mock/floors','get',{
      code:200,
      data:floors
    })
  }
  #store/modules/home.js
  {
    import {reqGetFloors} from '@/api';
    const state={
      floor:[],
    }
    const actions={
      getFloor({commit}){
        reqGetFloors()
        .then((floors)=>{
          commit('GET_FLOORS',floors);
        })
        .catch((message)=>{
          console.log(message)
        })
      }
    }
    const mutations={
      GET_FLOORS(state,floors){
        state.floors=floors
      }
    }
  }
  #views/Home/Home.vue
  {
    <template>
      <Floor v-for="floor in floors" :key="floor.id" :floor="floor" />
    </template>
    <script>
      import {mapState,mapActions} from 'vuex';
      export default{
        computed:{
          ...mapState({
            floors:(state)=>state.home.floors
          })
        },
        methods:{
          ...mapActions(['getFloor'])
        },
        mounted(){
          this.getFloor()
        },
      }
    </script>
  }
  #views/Home/Floor/Floor.vue
  {
    <template>
      <h3 class="fl">{{ floor.name }}</h3>
      .....
        <li v-for="(nav,index) in floor.navList" :key="index">
          <a></a>
        </li>
      .....
        <li v-for="(keyword, index) in floor.keywords" :key="index">
          {{ keyword }}
        </li>
        <img :src="floor.imgUrl" />
        <div class="floorBanner">
          <Carousel :carouselList="floor.carouselList" />
        </div>
      .....
    </template>
    <script>
      export default{
        props:['floor'],
      }
    </script>
  }
  ğŸ•#components/Carousel/index.vue
  {
    export default {
      watch:{
        carouselList:{
            handler(newVal) {
            if (!newVal.length) return; // ä¸ºäº†bannersç¬¬ä¸€æ¬¡ä¸è¦newSwiper
            this.$nextTick(() => {
              this.swiper = new Swiper(this.$refs.swiper, {
                navigation: {
                  nextEl: '.swiper-button-next',
                  prevEl: '.swiper-button-prev',
                },
                pagination: {
                  el: '.swiper-pagination',
                },
                loop: true,
                autoplay: {
                  delay: 1000,
                },
              });
              console.log(this.swiper);
            });
          },
          immediate: true,
        }
      }
    }
  }
17.æœç´¢
  #Header
18.paramså¿…é¡»å’Œè·¯ç”±é…åˆ:è¦åŠ ä¸Š/:keyword
19.å¦‚æœä¼ é€’çš„å€¼æ˜¯è¦æ”¹å˜çš„,ä¸èƒ½å®šä¹‰åœ¨metaä¸­
20.åœ¨v-ifæˆ–è€…v-showä¸­,ç›´æ¥èµ‹å€¼trueæ¯” a=!aæ€§èƒ½å¥½,å› ä¸ºåè€…ä¼šé¢å¤–ç»è¿‡ä¸€æ¬¡getter,å‰é¢ä¸ä¼š
21.åˆ†åˆ«æš´éœ²ç›´æ¥å¼•å…¥æ˜¯æ²¡æœ‰ä¸œè¥¿çš„
ğŸŸ22.æœç´¢ç»“æœé¡µé¢&æ˜¾ç¤ºéšè—&vuexè·å–æ•°æ®&ä½¿ç”¨getteræ˜ å°„vuexçš„æ•°æ®&
  #api/index.js
  {
    export const reqGetGoodsList = (data) =>
    request({
      method: 'POST',
      url: '/list',
      data,
    });
  }
  #router/routes.js
  {
    {
      // ä½¿ç”¨paramså¿…é¡»è¦è·¯ç”±è·¯å¾„é…ç½®
      path: '/search/:keyword?/', // paramså‚æ•°å¯ä¼ å¯ä¸ä¼ ,å¦‚æœä¸åŠ é—®å·,è¡¨ç¤ºå¿…å¡«
      name: 'Search',
      component: Search,
    },
  }
  #components/TypeNav/index.vue
  {
    <template>
      <div class="type-nav" @mouseleave="isShow = false">
        <div class="container">
          <h2 class="all" @mouseenter="isShow = true">å…¨éƒ¨å•†å“åˆ†ç±»</h2>
          .....
          <div class="sort" v-if="isHome || isShow"></div>
        </div>
      </div>
    </template>
    <script>
      export default{
        data(){
          return {
            isShow:false,
            isHome:this.$route.path==='/',
          }
        }
      }
    </script>
  }
  #components/Header/Header.vue
  {
    <template>
      <form @submit.prevent="toSearch">
        <input
          v-model="keyword"
        />
        <button type="submit">æœç´¢</button> 
      </form>
    </template>
    <script>
      export default{
        data(){
          return {
            keyword:'',
          }
        },
        methods:{
          toSearch(){
            const {keyword}=this;
            const location = {name:'Search'};
            if(this.keyword){location.params = {keyword}};
            this.$router.history.push(location);
          }
        }
      }
    </script> 
  }
  #store/modules/search.js
  {
    import { reqGetGoodsList } from '@/api';
    export const state={
      searchList: {
        // å“ç‰Œåˆ—è¡¨æ•°æ®
        trademarkList: [],
        // å•†å“å±æ€§åˆ—è¡¨æ•°æ®
        attrsList: [],
        // å•†å“æ•°æ®
        goodsList: [],
        // å•†å“æ€»æ•°
        total: 0,
        // æ¯é¡µæ˜¾ç¤ºæ¡æ•°
        pageSize: 5,
        // å½“å‰é¡µæ•°
        pageNo: 1,
        // æ€»é¡µæ•°
        totalPages: 1,
      },
    };
    export const getters={};
    export const actions={
      getGoodsList({commit},data){
        reqGetGoodsList(data)
        .then((searchList)=>{
          commit('REQ_GET_GOODS_LIST', searchList);
        })
        .catch((message)=.{
          console.log(message);
        })
      }
    }
    export const mutations={
      REQ_GET_GOODS_LIST(state, searchList) {
        state.searchList = searchList;
      },
    }
  }
  #store/modules/index.js
  {
    import * as search from './search';
    export default{
      search,
    }
  }
  #store/getters.js
  {
    export default {
      // å…ˆç”¨getterå¤„ç†stateçš„å¥½å¤„:1.æœ‰ç¼“å­˜ 2.ä»¥åå…¶ä»–ç»„ä»¶ä¸éœ€è¦å†™è¿™ä¹ˆé•¿
      trademarkList(state) {
        return state.search.searchList.trademarkList;
      },
      attrsList(state) {
        return state.search.searchList.attrsList;
      },
      goodsList(state) {
        return state.search.searchList.goodsList;
      },
      total(state) {
        return state.search.searchList.total;
      },
      pageSize(state) {
        return state.search.searchList.pageSize;
      },
      pageNo(state) {
        return state.search.searchList.pageNo;
      },
      totalPages(state) {
        return state.search.searchList.totalPages;
      },
    };
  }
  #store/index.js
  {
    import getters from './getters';
    export default new Vuex.Store({
      getters,
    })
  }
  #views/Search/Search.vue
  {
    <template>
      <TypeNav />
      .....
    </template>
    <script>
      import {mapGetters,mapActions} from 'vuex';
      export default{
        computed:{
          ...mapGetters({
            'trademarkList',
            'attrsList',
            'goodsList',
            'total',
            'pageSize',
            'pageNo',
            'totalPages',
          })
        },
        methods:{
          ...mapActions(['getGoodsList']),
        },
        mounted(){
          this.getGoodsList({})// åŠŸèƒ½æœªå®Œæˆ,å¯åœ¨devToolä¸­æŸ¥çœ‹vuexçŠ¶æ€,è·å–æ•°æ®æˆåŠŸ
        }
      }
    </script>
  }
23.paramsåªè¦å†™äº†å°±å¿…é¡»ä¼ é€’å‚æ•°,ä¸èƒ½æ˜¯undefined!!!,å¦åˆ™ä¼šè·³è½¬ä¸è¿‡å»
  tip:routesçš„pathåŠ é—®å·è¡¨ç¤ºå¯é€‰,{path:'Search/:keyword?'}
24.å±•ç¤ºvuexæ•°æ®
  #views/Search/Search.vue
  {
    <ul class="fl sui-tag">
      <li class="with-x" v-show="$route.query.categoryName">
        {{ $route.query.categoryName }}~~~
      </li>
      <li class="with-x" v-show="$route.params.keyword">
        {{ $route.params.keyword }}~~~
      </li>
    </ul>
    .....
    <div class="goods-list">
      <ul>
        <li class="yui3-u-1-5" v-for="goods in goodsList" :key="goods.id">
        .....
      </ul>
    </div>
  }
  #views/Search/SearchSelector/SearchSelector.vue
  {
    <template>
      <ul class="logo-list">
        <li v-for="trademark in trademarkList" :key="trademark.tmId">
          {{ trademark.tmName }}
        </li>
      </ul>
      .....
      <div class="type-wrap" v-for="(attrs, index) in attrsList" :key="index">
        <div class="fl key">{{ attrs.attrName }}</div>
        <div class="fl value">
          <ul class="type-list">
            <li v-for="attr in attrs.attrValueList" :key="attr.attrId">
              <a>{{ attr }}</a>
            </li>
          </ul>
        </div>
        <div class="fl ext"></div>
      </div>
    </template>
    <script>
      import {mapGetters} from 'vuex';
      export default{
        computed:{
          ...mapGetters(['trademarkList', 'attrsList']),
        },
      }
    </script>
  }
25.æ›´æ–°paramsçš„æ•°æ®æ˜¯å¼‚æ­¥çš„
ğŸ˜‚ğŸ˜‚26.å®ç°é¡µé¢è·³è½¬æ•°æ®è‡ªåŠ¨æ›´æ–°
  #components/Header/Header.vue
  {
    export default{
      .....
      methods:{
        toSearch() {
          const { keyword } = this;
          const { query } = this.$route;
          const location = { name: 'Search' };
          if (keyword) {
            location.params = { keyword };
          }
          if (query.categoryName) {
            location.query = query;//å¦‚æœåŸæœ¬æœ‰queryå‚æ•°äº†,å½“ç”¨æˆ·ä½¿ç”¨æœç´¢æŒ‰é’®ç­›é€‰,ä¿æŒqueryçš„çŠ¶æ€
          }
          this.$router.history.push(location);
        },
      },
      .....
    }
  }
  #components/TypeNav/index.vue
  {
    export default{
      methods:{
        toSearch(event){
          const{category,categoryid,level}=e.target.dataset;
          if(!categoryname) return;
          const location = {name:'Search',};
          // å¤„ç†queryå‚æ•°
          const query = {
            categoryname:categoryname,
            [level]:categoryid,
          };
          location.query=query;
          // å¤„ç†paramså‚æ•°(æœ¬æ¥åªéœ€è¦å¤„ç†query,ä½†æ˜¯å¯èƒ½ç”¨æˆ·åœ¨Searchç»„ä»¶ç‚¹å‡»ä¸‰çº§å¯¼èˆª,ä¸ºäº†paramså‚æ•°ä¸æ¶ˆå¤±,å¤„ç†ä¸€ä¸‹)
          const {keyword}=this.$route.params;
          if(keyword){
            location.params={keyword}
          }
          //é€šçŸ¥searchç»„ä»¶è¯·æ±‚æ•°æ®
          this.$router.history.push(location)
        },
      },
    };
  }
  #/views/Search/Search.vue
  {
    export default{
      data(){
        const {
          category1Id,
          category2Id,
          category3Id,
          categoryName,
        }=this.$route.query;
        const {keyword}=this.$route.params;
        return {
          // æœç´¢æ¡ä»¶
          options:{
            category1Id,
            category2Id,
            category3Id,
            categoryName,
            keyword,
            order: '',
            pageNo: 1,
            pageSize: 10,
            props: [],
            trademark: '',
          },
        };
      },
      computed:{
        ...mapGetters(['goodsList']),
      },
      methods:{
        ...mapActions(['getGoodsList']),
        search(newOptions={}){
          // category1Id=undefined ä¸å½±å“æœç´¢ç»“æœ
          // å¦‚æœåœ¨å½“å‰é¡µé¢æ›´æ–°paramså‚æ•°,å‚æ•°ä¸ä¼šç«‹å³æ›´æ–°,æ‰€ä»¥éœ€è¦æ‰‹åŠ¨ä¼ é€’è¿‡æ¥,æœ‰å€¼å°±ç”¨,æ²¡æœ‰å°±æ˜¯undefined
          const options={
            ...this.options,
            ...newOptions,
          };
          this.options=options;
          this.options=this.getGoodsList(options);
        },
      },
      watch:{
        $route:{
          handler(newVal){
            this.search({
              ...newVal.params,
              ...newVal.query,
            });
          },
          deep:true,
          immediate:true,
        },
      },
      mounted(){}
    };
  }
27.ä»Šå¤©çš„æœ‰ç‚¹éš¾,ä¸»è¦æ˜¯é€»è¾‘æ¿æ¯”è¾ƒä¹±
28.å¦‚æœè‡ªå·±å†™ä¸å‡ºæ¥,è‡³å°‘ä¿è¯èƒ½çœ‹æ‡‚ä»£ç ,èƒ½æ›´åŠ ä»£ç å†™å‡ºè‡ªå·±çš„ç†è§£
29.