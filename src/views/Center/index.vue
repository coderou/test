<template>
  <div class="order-main">
    <div class="container">
      <div class="order-body">
        <!--å·¦ä¾§åˆ—è¡¨-->
        <div class="order-left">
          <dl>
            <dt><i>Â·</i> è®¢å•ä¸­å¿ƒ</dt>
            <dd>æˆ‘çš„è®¢å•</dd>
            <dd>å›¢è´­è®¢å•</dd>
            <dd>æœ¬åœ°ç”Ÿæ´»è®¢å•</dd>
            <dd>æˆ‘çš„é¢„å”®</dd>
            <dd>è¯„ä»·æ™’å•</dd>
            <dd>å–æ¶ˆè®¢å•è®°å½•</dd>
          </dl>
          <dl>
            <dt><i>Â·</i> å…³æ³¨ä¸­å¿ƒ</dt>
            <dd>å…³æ³¨çš„å•†å“</dd>
            <dd>å…³æ³¨çš„åº—é“º</dd>
            <dd>å…³æ³¨çš„ä¸“è¾‘</dd>
            <dd>å…³æ³¨çš„å“ç‰Œ</dd>
            <dd>å…³æ³¨çš„æ´»åŠ¨</dd>
            <dd>æµè§ˆå†å²</dd>
          </dl>
          <dl>
            <dt><i>Â·</i> ç‰¹è‰²ä¸šåŠ¡</dt>
            <dd>æˆ‘çš„è¥ä¸šå…</dd>
            <dd>äº¬ä¸œé€šä¿¡</dd>
            <dd>å®šæœŸé€</dd>
            <dd>äº¬ä¸œä»£ä¸‹å•</dd>
            <dd>æˆ‘çš„å›æ”¶å•</dd>
            <dd>èŠ‚èƒ½è¡¥è´´</dd>
            <dd>åŒ»è¯æœåŠ¡</dd>
            <dd>æµé‡åŠ æ²¹ç«™</dd>
            <dd>é»„é‡‘æ‰˜ç®¡</dd>
          </dl>
          <dl>
            <dt><i>Â·</i> å®¢æˆ·æœåŠ¡</dt>
            <dd>è¿”ä¿®é€€æ¢è´§</dd>
            <dd>ä»·æ ¼ä¿æŠ¤</dd>
            <dd>æ„è§å»ºè®®</dd>
            <dd>è´­ä¹°å’¨è¯¢</dd>
            <dd>äº¤æ˜“çº çº·</dd>
            <dd>æˆ‘çš„å‘ç¥¨</dd>
          </dl>
          <dl>
            <dt><i>Â·</i> è®¾ç½®</dt>
            <dd>ä¸ªäººä¿¡æ¯</dd>
            <dd>æ”¶è´§åœ°å€</dd>
          </dl>
        </div>
        <!-- å³ä¾§å†…å®¹ -->
        <div class="order-right">
          <div class="order-content">
            <div class="title">
              <h3>æˆ‘çš„è®¢å•</h3>
            </div>
            <div class="chosetype">
              <table>
                <thead>
                  <tr>
                    <th width="29%">å•†å“</th>
                    <th width="31%">è®¢å•è¯¦æƒ…</th>
                    <th width="13%">æ”¶è´§äºº</th>
                    <th>é‡‘é¢</th>
                    <th>çŠ¶æ€</th>
                    <th>æ“ä½œ</th>
                  </tr>
                </thead>
              </table>
            </div>
            <div class="orders">
              <table
                class="order-item"
                v-for="order in orderList"
                :key="order.id"
              >
                <!--
                  {
                        id: 2193,
                        totalAmount: 37992,
                        orderStatus: "UNPAID",
                        userId: 2055,
                        paymentWay: "ONLINE",
                        deliveryAddress: null,
                        orderComment: "è¯·å°½å¿«å‘è´§",
                        outTradeNo: "ATGUIGU1615943885524485",
                        tradeBody:
                          "Redmi 10X 4G 4GB+128GB å†°é›¾ç™½ æ¸¸æˆæ™ºèƒ½æ‰‹æœº å°ç±³ çº¢ç±³ å°ç±³10 è‡³å°Šçºªå¿µç‰ˆ ",
                        createTime: "2021-03-17 09:18:06",
                        operateTime: null,
                        expireTime: "2021-03-18 09:18:06",
                        processStatus: "UNPAID",
                        trackingNo: null,
                        parentOrderId: null,
                        imgUrl: null,
                        provinceId: null,
                        activityReduceAmount: null,
                        couponAmount: null,
                        originalTotalAmount: null,
                        feightFee: null,
                        feightFeeReduce: null,
                        refundableTime: null,
                        orderDetailList: [
                          {
                            id: 4281,
                            orderId: 2193,
                            skuId: 3,
                            skuName:
                              "å°ç±³10 è‡³å°Šçºªå¿µç‰ˆ åŒ é€æ˜ç‰ˆ æ¸¸æˆæ‰‹æœº",
                            imgUrl:
                              "http://47.93.148.1fo612.jpg",
                            orderPrice: 5999,
                            skuNum: 6,
                            createTime: "2021-03-17 09:18:06",
                            sourceType: "QUERY",
                            sourceId: 3,
                            splitTotalAmount: 35994,
                            splitActivityAmount: 0,
                            splitCouponAmount: 0,
                            refundStatus: "",
                            refundStatusString: "",
                            hasStock: null,
                            activityRule: null,
                            couponInfoList: null,
                          },
                          {
                            id: 4280,
                            orderId: 2193,
                            skuId: 4,
                            skuName:
                              "Redmi 1ç”µé‡  æ¸¸æˆæ™ºèƒ½æ‰‹æœº å°ç±³ çº¢ç±³",
                            imgUrl:
                              "rBHu8l-rgJqAHPnoAAF9hoDNfsc505.jpg",
                            orderPrice: 999,
                            skuNum: 2,
                            createTime: "2021-03-17 09:18:06",
                            sourceType: "QUERY",
                            sourceId: 4,
                            splitTotalAmount: 1998,
                            splitActivityAmount: 0,
                            splitCouponAmount: 0,
                            refundStatus: "",
                            refundStatusString: "",
                            hasStock: null,
                            activityRule: null,
                            couponInfoList: null,
                          },
                        ],
                        orderDetailVoList: null,
                        orderStatusName: "æœªæ”¯ä»˜",
                        wareId: null,
                        couponInfo: null,
                      };

               -->
                <thead>
                  <tr>
                    <th colspan="5">
                      <span class="ordertitle"
                        >{{ order.createTime }} è®¢å•ç¼–å·ï¼š{{
                          order.outTradeNo
                        }}</span
                      >
                      <span class="pull-right delete">
                        <img src="./images/delete.png" />
                      </span>
                    </th>
                  </tr>
                </thead>
                <tbody>
                  <tr
                    v-for="(orderDetail, index) in order.orderDetailList"
                    :key="orderDetail.id"
                  >
                    <td width="60%">
                      <div class="typographic">
                        <img
                          :style="{ width: '100px', height: '100px' }"
                          v-lazy="orderDetail.imgUrl"
                        />
                        <a class="block-text">{{ orderDetail.skuName }}</a>
                        <span>x{{ orderDetail.skuNum }}</span>
                        <a class="service">å”®åç”³è¯·</a>
                      </div>
                    </td>
                    <!-- templateç©ºæ ‡ç­¾ -->
                    <template v-if="index === 0">
                      <td rowspan="2" width="8%" class="center">xxx</td>
                      <td rowspan="2" width="13%" class="center">
                        <ul class="unstyled">
                          <li>æ€»é‡‘é¢Â¥{{ order.totalAmount }}</li>
                          <li>
                            {{
                              order.paymentWay === 'ONLINE'
                                ? 'åœ¨çº¿æ”¯ä»˜'
                                : 'xxæ”¯ä»˜'
                            }}
                          </li>
                        </ul>
                      </td>
                      <td rowspan="2" width="8%" class="center">
                        <a class="btn">{{ order.orderStatusName }} </a>
                      </td>
                      <td rowspan="2" width="13%" class="center">
                        <ul class="unstyled">
                          <li>
                            <a href="mycomment.html" target="_blank"
                              >è¯„ä»·|æ™’å•</a
                            >
                          </li>
                        </ul>
                      </td>
                    </template>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="choose-order">
              <Pagination
                @size-change="handleSizeChange"
                @current-change="handleCurrentChange"
                :current-page="currentPage"
                :page-size="pageSize"
                :page-sizes="[5, 10, 15, 20]"
                :total="total"
                :pager-count="7"
              />
            </div>
          </div>
          <!--çŒœä½ å–œæ¬¢-->
          <div class="like">
            <h4 class="kt">çŒœä½ å–œæ¬¢</h4>
            <ul class="like-list">
              <li class="likeItem">
                <div class="p-img">
                  <img src="./images/itemlike01.png" />
                </div>
                <div class="attr">
                  <em>DELLæˆ´å°”Ins 15MR-7528SS 15è‹±å¯¸ é“¶è‰² ç¬”è®°æœ¬</em>
                </div>
                <div class="price">
                  <em>Â¥</em>
                  <i>3699.00</i>
                </div>
                <div class="commit">å·²æœ‰6äººè¯„ä»·</div>
              </li>
              <li class="likeItem">
                <div class="p-img">
                  <img src="./images/itemlike02.png" />
                </div>
                <div class="attr">Appleè‹¹æœiPhone 6s/6s Plus 16G 64G 128G</div>
                <div class="price">
                  <em>Â¥</em>
                  <i>4388.00</i>
                </div>
                <div class="commit">å·²æœ‰700äººè¯„ä»·</div>
              </li>
              <li class="likeItem">
                <div class="p-img">
                  <img src="./images/itemlike03.png" />
                </div>
                <div class="attr">
                  DELLæˆ´å°”Ins 15MR-7528SS 15è‹±å¯¸ é“¶è‰² ç¬”è®°æœ¬
                </div>
                <div class="price">
                  <em>Â¥</em>
                  <i>4088.00</i>
                </div>
                <div class="commit">å·²æœ‰700äººè¯„ä»·</div>
              </li>
              <li class="likeItem">
                <div class="p-img">
                  <img src="./images/itemlike04.png" />
                </div>
                <div class="attr">
                  DELLæˆ´å°”Ins 15MR-7528SS 15è‹±å¯¸ é“¶è‰² ç¬”è®°æœ¬
                </div>
                <div class="price">
                  <em>Â¥</em>
                  <i>4088.00</i>
                </div>
                <div class="commit">å·²æœ‰700äººè¯„ä»·</div>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script>
import {reqGetOrderList} from '@/api/pay';

export default {
  name: 'Center',
  data() {
    return {
      orderList: [], // ä¿å­˜è®¢è´­å•†å“æ•°æ®
      currentPage: 1, // ä¿å­˜å½“å‰æ˜¯ç¬¬å‡ é¡µ
      pageSize: 5, // ä¿å­˜æ¯é¡µæ˜¾ç¤ºå‡ æ¡æ•°æ®
      total: 0, // ä¿å­˜ä¸€å…±æœ‰å¤šå°‘æ•°æ®
    };
  },
  methods: {
    // FN:ç‚¹å‡»åˆ‡æ¢é¡µç 
    handleSizeChange(pageSize) {
      this.pageSize = pageSize;
      this.getOrderList(this.currentPage, pageSize);
    },
    // FN:ç‚¹å‡»æ”¹å˜å½“å‰æ˜¾ç¤ºç¬¬å‡ é¡µ
    handleCurrentChange(currentPage) {
      this.currentPage = currentPage;
      this.getOrderList(currentPage, this.pageSize);
    },
    // FN:ğŸŸè·å–orderList
    async getOrderList(currentPage, pageSize) {
      const response = await reqGetOrderList(currentPage, pageSize);
      this.orderList = response.records;
      this.total = response.total;
    },
  },
  mounted() {
    // 1.ç»“æ„éœ€è¦çš„å‚æ•°
    const { currentPage, pageSize } = this;
    // 2.è°ƒç”¨ğŸŸè·å–orderListå‡½æ•°(FNæ¥è‡ªmethods)
    this.getOrderList(currentPage, pageSize);
  },
};
</script>

<style lang="less" scoped>
.order-main {
  .container {
    margin: 0 auto;
    width: 1200px;

    .order-body {
      padding: 10px;
      color: #333;

      &:after {
        content: '';
        display: block;
        clear: both;
      }

      //å·¦è¾¹
      .order-left {
        float: left;
        width: 16.67%;

        dl {
          line-height: 28px;

          dt {
            font-weight: 700;
            padding: 5px;

            i {
              color: #77b72c;
            }
          }

          dd {
            margin: 0 0 6px;
            border-bottom: 1px solid #ededed;
            text-align: center;
          }
        }
      }

      //å³è¾¹
      .order-right {
        float: right;
        width: 83.33%;

        //è®¢å•éƒ¨åˆ†
        .order-content {
          margin: 0 20px;
          color: #666;

          //æ ‡é¢˜
          .title {
            margin-bottom: 22px;
            border: 1px solid #ddd;

            h3 {
              padding: 12px 10px;
              font-size: 15px;
              background-color: #f1f1f1;
            }
          }

          //è¡¨å¤´
          .chosetype {
            margin-bottom: 15px;
            color: #666;

            table {
              border: 1px solid #e6e6e6;
              border-collapse: separate;
              border-radius: 2px;
              width: 100%;
              max-width: 100%;
              border-spacing: 0;

              th {
                padding: 6px 8px;
                color: #666;
                font-weight: 700;
                vertical-align: bottom;
                background-color: #f4f4f4;
                line-height: 18px;
                border-bottom: 1px solid #e6e6e6;
                font-size: 12px;
                text-align: left;
              }
            }
          }

          // è¡¨å•å†…å®¹
          .orders {
            font-size: 12px;

            a {
              &:hover {
                color: #4cb9fc;
              }
            }

            table {
              border: 1px solid #e6e6e6;
              border-collapse: collapse;
              border-radius: 2px;
              width: 100%;
              margin-bottom: 18px;
              max-width: 100%;

              th {
                padding: 6px 8px;
                line-height: 18px;
                text-align: left;
                vertical-align: bottom;
                background-color: #f4f4f4;
                font-size: 12px;
                color: #666;

                .pull-right {
                  float: right;
                  cursor: pointer;

                  img {
                    margin-right: 10px;
                    vertical-align: middle;
                  }
                }
              }

              td {
                font-size: 12px;
                color: #666;
                padding: 6px 8px;
                line-height: 18px;
                text-align: left;
                vertical-align: middle;
                border: 1px solid #e6e6e6;

                &.center {
                  text-align: center;
                }

                .typographic {
                  img {
                    float: left;
                    margin-right: 10px;
                  }

                  a {
                    float: left;
                    min-width: 80px;
                    max-width: 250px;
                    color: #e1251b;

                    &.service {
                      color: #666;
                    }
                  }

                  span {
                    float: left;
                    min-width: 80px;
                    max-width: 250px;
                    text-align: center;
                  }
                }
              }
            }
          }

          // åˆ†é¡µ
          .choose-order {
            .pagination {
              margin: 38px 0;

              ul {
                font-size: 0;
                display: inline-block;

                li {
                  display: inline-block;
                  padding: 4px 9px;
                  font-size: 14px;
                  border: 1px solid #e0e9ee;

                  &.prev,
                  &.next {
                    background-color: #fafafa;
                  }

                  &.prev {
                    border-right-color: #28a3ef;
                  }

                  &.page {
                    border-color: #28a3ef;
                    border-left: 0;

                    &.actived {
                      background-color: #28a3ef;

                      a {
                        color: #fff;
                      }
                    }
                  }
                }
              }

              div {
                display: inline-block;
                font-size: 14px;
                color: #333;
              }
            }
          }
        }

        // çŒœä½ å–œæ¬¢
        .like {
          border: 1px solid #ddd;
          margin: 15px 20px;

          .kt {
            border-bottom: 1px solid #ddd;
            background: #f1f1f1;
            color: #666;
            margin: 0;
            padding: 12px;
            font-size: 15px;
          }

          .like-list {
            padding: 15px 11px;
            overflow: hidden;

            .likeItem {
              width: 25%;
              float: left;

              .p-img {
                text-align: left;

                img {
                  width: 167px;
                  height: 123px;
                }
              }

              .attr {
                padding: 0 15px;
              }

              .price {
                padding: 0 15px;
                font-size: 16px;
                color: #c81623;
                margin-bottom: 20px;
              }

              .commit {
                padding: 0 15px;
              }
            }
          }
        }
      }
    }
  }
}
</style>
